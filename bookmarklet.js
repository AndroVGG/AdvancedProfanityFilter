!function(e){var t={};function i(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(s,o,function(t){return e[t]}.bind(null,o));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3)}([function(e,t,i){"use strict";function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class o{static filterMethodName(e){return this.nameById(this.FilterMethods,e)}static matchMethodName(e){return this.nameById(this.MatchMethods,e)}static nameById(e,t){return Object.entries(e).filter(e=>e[1]===t)[0][0]}static orderedArray(e){let t=[];return Object.values(e).sort().forEach(i=>{t.push(o.nameById(e,i))}),t}}t.default=o,s(o,"FilterMethods",{Censor:0,Substitute:1,Remove:2}),s(o,"MatchMethods",{Exact:0,Partial:1,Whole:2,Regex:3}),s(o,"MuteMethods",{Tab:0,Video:1}),s(o,"ShowSubtitles",{All:0,Filtered:1,Unfiltered:2,None:3})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,o=(s=i(0))&&s.__esModule?s:{default:s};function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class r{static allLowerCase(e){return e.toLowerCase()===e}static allUpperCase(e){return e.toUpperCase()===e}static capitalize(e){return e.charAt(0).toUpperCase()+e.substr(1)}static capitalized(e){return e.charAt(0).toUpperCase()===e.charAt(0)}static containsDoubleByte(e){return!!e.length&&(e.charCodeAt(0)>127||r._unicodeRegExp.test(e))}static escapeRegExp(e){return e.replace(r._escapeRegExp,"\\$&")}constructor(e,t,i){a(this,"_filterMethod",void 0),a(this,"escaped",void 0),a(this,"lists",void 0),a(this,"matchMethod",void 0),a(this,"matchRepeated",void 0),a(this,"matchSeparators",void 0),a(this,"regExp",void 0),a(this,"sub",void 0),a(this,"unicode",void 0),a(this,"value",void 0),this.value=e,this.lists=void 0===t.lists?[]:t.lists,this.matchMethod=void 0===t.matchMethod?i.defaultWordMatchMethod:t.matchMethod,this.matchRepeated=void 0===t.repeat?i.defaultWordRepeat:t.repeat,this.matchSeparators=void 0===t.separators?i.defaultWordSeparators:t.separators,this.sub=void 0===t.sub?i.defaultSubstitution:t.sub,this._filterMethod=void 0===t._filterMethod?i.filterMethod:t._filterMethod,this.unicode=r.containsDoubleByte(e),this.escaped=this.matchMethod===o.default.MatchMethods.Regex?this.value:r.escapeRegExp(this.value),this.regExp=this.buildRegExp()}buildRegExp(){let e=this;try{switch(e.matchMethod){case o.default.MatchMethods.Partial:return e._filterMethod===o.default.FilterMethods.Remove?e.unicode?new RegExp("(^|"+r._unicodeWordBoundary+"?)([\\w-]*"+e.processedPhrase()+"[\\w-]*)("+r._unicodeWordBoundary+"?|$)",e.regexOptions()):e.hasEdgePunctuation()?new RegExp("(^|\\s)([\\w-]*"+e.processedPhrase()+"[\\w-]*)(\\s|$)",e.regexOptions()):new RegExp("\\s?\\b[\\w-]*"+e.processedPhrase()+"[\\w-]*\\b\\s?",e.regexOptions()):new RegExp(e.processedPhrase(),e.regexOptions());case o.default.MatchMethods.Whole:return e.unicode?new RegExp("(^|"+r._unicodeWordBoundary+"*)([\\S]*"+e.processedPhrase()+"[\\S]*)("+r._unicodeWordBoundary+"*|$)",e.regexOptions()):e.hasEdgePunctuation()?new RegExp("(^|\\s)([\\S]*"+e.processedPhrase()+"[\\S]*)(\\s|$)",e.regexOptions()):new RegExp("\\b[\\w-]*"+e.processedPhrase()+"[\\w-]*\\b",e.regexOptions());case o.default.MatchMethods.Regex:return new RegExp(e.value,e.regexOptions());case o.default.MatchMethods.Exact:default:return e._filterMethod===o.default.FilterMethods.Remove?e.unicode?new RegExp("(^|"+r._unicodeWordBoundary+")("+e.processedPhrase()+")("+r._unicodeWordBoundary+"|$)",e.regexOptions()):e.hasEdgePunctuation()?new RegExp("(^|\\s)("+e.processedPhrase()+")(\\s|$)",e.regexOptions()):new RegExp("\\s?\\b"+e.processedPhrase()+"\\b\\s?",e.regexOptions()):e.unicode?new RegExp("(^|"+r._unicodeWordBoundary+"+)("+e.processedPhrase()+")("+r._unicodeWordBoundary+"+|$)",e.regexOptions()):e.hasEdgePunctuation()?new RegExp("(^|\\s)("+e.processedPhrase()+")(\\s|$)",e.regexOptions()):new RegExp("\\b"+e.processedPhrase()+"\\b",e.regexOptions())}}catch(t){throw new Error('Failed to create RegExp for "'+e.value+'" - '+t.name+" "+t.message)}}hasEdgePunctuation(){return r._edgePunctuationRegExp.test(this.value)}processedPhrase(){let e=this,t=e.escaped.includes("\\"),i="",s=e.escaped.length-1;for(let o=0;o<e.escaped.length;o++)t&&"\\"===e.escaped[o]&&(i+=e.escaped[o],o++),i+=e.escaped[o],e.matchRepeated&&(i+="+"),e.matchSeparators&&o!=s&&(i+=r.separatorsRegExp);return i}regexOptions(){let e="gi";return this.unicode&&(e+="u"),e}}t.default=r,a(r,"_edgePunctuationRegExp",/(^[,.'"!?%$]|[,.'"!?%$]$)/),a(r,"_escapeRegExp",/[\/\\^$*+?.()|[\]{}]/g),a(r,"_unicodeRegExp",/[^\u0000-\u00ff]/),a(r,"_unicodeWordBoundary","[\\s.,'\"+!?|-]"),a(r,"nonWordRegExp",new RegExp("^\\s*[^\\w]+\\s*$","g")),a(r,"separatorsRegExp","[-_ ]*"),a(r,"whitespaceRegExp",/^\s+$/)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,o=(s=i(1))&&s.__esModule?s:{default:s};function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.default=class{constructor(e,t){a(this,"all",void 0),a(this,"list",void 0),a(this,"regExps",void 0);let i=this;this.all=[],this.list=[],this.regExps=[],Object.keys(e.words).sort((e,t)=>t.length-e.length).forEach(s=>{if(0===t||!Array.isArray(e.words[s].lists)||e.words[s].lists.includes(t)){i.list.push(s);let t=new o.default(s,e.words[s],e);i.all.push(t),i.regExps.push(t.regExp)}})}find(e){return"string"==typeof e?this.all[this.list.indexOf(e)]:"number"==typeof e?this.all[e]:void 0}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=u(i(0)),o=u(i(4)),a=u(i(5)),r=u(i(6)),d=u(i(7)),n=u(i(9)),l=u(i(2));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i(11);let h={runtime:{}};h.runtime.sendMessage=function(e){};
/* @preserve - Start User Config */
let p=n.default._defaults;p.words=n.default._defaultWords;
/* @preserve - End User Config */
class f extends a.default{constructor(){super(),c(this,"advanced",void 0),c(this,"audio",void 0),c(this,"audioOnly",void 0),c(this,"audioWordlistId",void 0),c(this,"cfg",void 0),c(this,"domain",void 0),c(this,"hostname",void 0),c(this,"iframe",void 0),c(this,"location",void 0),c(this,"mutePage",void 0),c(this,"observer",void 0),c(this,"shadowObserver",void 0),this.advanced=!1,this.audioWordlistId=0,this.mutePage=!1}advancedReplaceText(e,t,i=!0){m.wordlists[t].regExps.forEach(s=>{findAndReplaceDOMText(e,{preset:"prose",find:s,replace:function(e,s){return 0===e.index?m.replaceText(s[0],t,i):""}})})}checkMutationForProfanity(e){e.addedNodes.forEach(e=>{r.default.isForbiddenNode(e)||(m.mutePage?m.cleanAudio(e):m.audioOnly||m.cleanNodeText(e))}),m.mutePage&&m.audio.muted&&e.removedNodes.forEach(e=>{(!1!==m.audio.supportedNode(e)||e==m.audio.lastFilteredNode||m.audio.simpleUnmute&&m.audio.lastFilteredText&&m.audio.lastFilteredText.includes(e.textContent))&&m.audio.unmute()}),e.target&&"#text"===e.target.nodeName&&m.checkMutationTargetTextForProfanity(e)}checkMutationTargetTextForProfanity(e){if(!r.default.isForbiddenNode(e.target)){let t=!!m.mutePage&&m.audio.supportedNode(e.target);if(!1!==t&&m.audio.simpleUnmute)m.audio.muted&&e.oldValue&&m.audio.lastFilteredText&&m.audio.lastFilteredText.includes(e.oldValue)&&m.audio.unmute(),m.audio.clean(e.target,t);else if(m.mutePage&&m.audio.simpleUnmute&&m.audio.muted&&!e.target.parentElement)m.audio.lastFilteredText&&m.audio.lastFilteredText.includes(e.target.textContent)&&m.audio.unmute();else if(!m.audioOnly){let t=this.replaceTextResult(e.target.data,this.wordlistId);t.modified&&(e.target.data=t.filtered)}}}cleanAudio(e){if(m.audio.youTube&&m.audio.youTubeAutoSubsPresent())m.audio.youTubeAutoSubsSupportedNode(e)?m.audio.youTubeAutoSubsCurrentRow(e)?m.audio.cleanYouTubeAutoSubs(e):m.audioOnly||m.cleanNodeText(e):m.audioOnly||m.audio.youTubeAutoSubsNodeIsSubtitleText(e)||m.cleanNodeText(e);else{let t=m.audio.supportedNode(e);!1!==t?m.audio.clean(e,t):m.audioOnly||m.cleanNodeText(e)}}cleanNode(e,t=!0){if(r.default.isForbiddenNode(e))return!1;if(e.childElementCount>0){let i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);for(;i.nextNode();)i.currentNode.childNodes.length>0?i.currentNode.childNodes.forEach(e=>{this.cleanNode(e,t)}):this.cleanNode(i.currentNode,t)}else if(e.nodeName)if(e.textContent&&""!=e.textContent.trim()){let i=this.replaceTextResult(e.textContent,this.wordlistId,t);i.modified&&(e.textContent=i.filtered)}else"IMG"==e.nodeName?(""!=e.alt&&(e.alt=this.replaceText(e.alt,this.wordlistId,t)),""!=e.title&&(e.title=this.replaceText(e.title,this.wordlistId,t))):null!=e.shadowRoot&&this.startObserving(e.shadowRoot,this.shadowObserver)}cleanNodeText(e){m.advanced&&(e.parentNode||e===document)?m.advancedReplaceText(e,this.wordlistId,!0):m.cleanNode(e)}cleanPage(){this.cfg=new n.default(p),this.domain=o.default.byHostname(this.hostname,this.cfg.domains),this.cfg.muteMethod=s.default.MuteMethods.Video;let e={disabled:this.cfg.enabledDomainsOnly&&!this.domain.enabled||this.domain.disabled};if(e.disabled)return h.runtime.sendMessage(e),!1;this.domain.advanced&&(this.advanced=this.domain.advanced),void 0!==this.domain.wordlistId&&(this.wordlistId=this.domain.wordlistId),void 0!==this.domain.audioWordlistId&&(this.audioWordlistId=this.domain.audioWordlistId),this.cfg.muteAudio&&(this.audio=new d.default(this),this.mutePage=this.audio.supportedPage,this.mutePage&&this.cfg.wordlistsEnabled&&this.wordlistId!=this.audio.wordlistId&&(this.wordlists[this.audio.wordlistId]=new l.default(this.cfg,this.audio.wordlistId))),this.init(),this.audioOnly||this.cleanNodeText(document),this.startObserving(document)}processMutations(e){e.forEach((function(e){m.checkMutationForProfanity(e)}))}startObserving(e=document,t=m.observer){t.observe(e,b)}stopObserving(e=m.observer){let t=e.takeRecords();e.disconnect(),t&&this.processMutations(t)}updateCounterBadge(){}}t.default=f;let m=new f;const b={characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0};if("undefined"!=typeof window){if(m.observer=new MutationObserver(m.processMutations),m.shadowObserver=new MutationObserver(m.processMutations),window!=window.top){m.iframe=document.location;try{m.hostname=window.parent.location.hostname}catch(e){document.referrer?m.hostname=new URL(document.referrer).hostname:m.hostname=document.location.hostname}}else m.hostname=document.location.hostname;m.cleanPage()}},function(e,t,i){"use strict";function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class o{static byHostname(e,t){let i=o.findDomainKey(e,t)||e,s=o.byKey(i,t);return s.hostname=e,s}static byKey(e,t){return new o(e,t[e])}static findDomainKey(e,t){return Object.keys(t).sort((e,t)=>t.length-e.length).find(t=>new RegExp(`(^|.)${t}$`).test(e))}static getCurrentTab(){return new Promise((function(e,t){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){e(t[0])}))}))}static sortedKeys(e){return Object.keys(e).sort((function(e,t){let i=e.match(/\w*\.\w*$/)[0],s=t.match(/\w*\.\w*$/)[0];return i<s?-1:i>s?1:0}))}constructor(e,t){s(this,"advanced",void 0),s(this,"audioWordlistId",void 0),s(this,"cfg",void 0),s(this,"cfgKey",void 0),s(this,"disabled",void 0),s(this,"enabled",void 0),s(this,"hostname",void 0),s(this,"tab",void 0),s(this,"wordlistId",void 0),this.cfgKey=e,this.cfg={},t?this.cfg=t:Object.assign(this.cfg,o._domainCfgDefaults),this.updateFromCfg()}async save(e){if(e.domains)return this.updateCfg(),"{}"===JSON.stringify(this.cfg)?delete e.domains[this.cfgKey]:e.domains[this.cfgKey]=this.cfg,await e.save("domains")}updateCfg(){this.cfg.adv=!0===this.advanced||void 0,this.cfg.disabled=!0===this.disabled||void 0,this.cfg.enabled=!0===this.enabled||void 0,this.cfg.wordlist=this.wordlistId>=0?this.wordlistId:void 0,this.cfg.audioList=this.audioWordlistId>=0?this.audioWordlistId:void 0}updateFromCfg(){this.advanced=this.cfg.adv,this.disabled=this.cfg.disabled,this.enabled=this.cfg.enabled,this.wordlistId=this.cfg.wordlist,this.audioWordlistId=this.cfg.audioList}}t.default=o,s(o,"_domainCfgDefaults",{adv:void 0,audioList:void 0,disabled:void 0,enabled:void 0,wordlist:void 0})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(i(0)),o=r(i(1)),a=r(i(2));function r(e){return e&&e.__esModule?e:{default:e}}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t.default=class{constructor(){d(this,"cfg",void 0),d(this,"counter",void 0),d(this,"iWhitelist",void 0),d(this,"whitelist",void 0),d(this,"wordlistId",void 0),d(this,"wordlists",void 0),this.counter=0,this.iWhitelist=[],this.whitelist=[],this.wordlists={}}buildWordlist(e,t=!1){return!1===e&&(e=this.wordlistId),!t&&this.wordlists[e]||(this.wordlists[e]=new a.default(this.cfg,e)),e}checkWhitelist(e,t,i,a){let r=this,d=r.whitelist.length,n=r.iWhitelist.length;if(d||n){if(d&&r.whitelist.includes(e))return!0;if(n&&r.iWhitelist.includes(e.toLowerCase()))return!0;if(a.matchMethod===s.default.MatchMethods.Partial){let a,l={matchMethod:s.default.MatchMethods.Whole,repeat:!1,separators:!1,sub:""},u=new o.default(e,l,this.cfg).regExp;for(;null!==(a=u.exec(t));){let t=4==a.length?a[2]:a[0],s=4==a.length?a.index+a[1].length:a.index;if(s<=i&&s+t.length>=i+e.length){if(d&&r.whitelist.includes(t))return!0;if(n&&r.iWhitelist.includes(t.toLowerCase()))return!0}}}}return!1}foundMatch(e){this.counter++}init(e=!1){this.iWhitelist=this.cfg.iWordWhitelist,this.whitelist=this.cfg.wordWhitelist,void 0===this.wordlistId&&(this.wordlistId=null==this.cfg.wordlistId?0:this.cfg.wordlistId),this.buildWordlist(e)}matchData(e,t,i,o){let a=e.find(t),r=o.pop(),d=o.pop(),n=o,l=n.length>0&&a.matchMethod!==s.default.MatchMethods.Regex;return l&&(i=n[1]),{word:a,string:r,match:i,matchStartIndex:d,captureGroups:n,internalCaptureGroups:l}}rebuildWordlists(){let e=this;Object.keys(this.wordlists).forEach((function(t){e.buildWordlist(parseInt(t),!0)}))}replaceText(e,t=!1,i=!0){let a=this;t=a.buildWordlist(t);let r=a.wordlists[t];switch(a.cfg.filterMethod){case s.default.FilterMethods.Censor:r.regExps.forEach((t,s)=>{e=e.replace(t,(function(e,...t){let{word:o,string:d,match:n,matchStartIndex:l,captureGroups:u,internalCaptureGroups:c}=a.matchData(r,s,e,t);if(a.checkWhitelist(n,d,l,o))return n;i&&a.foundMatch(o);let h="",p=a.cfg.censorFixedLength>0?a.cfg.censorFixedLength:n.length;return h=a.cfg.preserveFirst&&a.cfg.preserveLast?n[0]+a.cfg.censorCharacter.repeat(p-2)+n.slice(-1):a.cfg.preserveFirst?n[0]+a.cfg.censorCharacter.repeat(p-1):a.cfg.preserveLast?a.cfg.censorCharacter.repeat(p-1)+n.slice(-1):a.cfg.censorCharacter.repeat(p),c&&(h=u[0]+h+u[2]),h}))});break;case s.default.FilterMethods.Substitute:r.regExps.forEach((t,s)=>{e=e.replace(t,(function(e,...t){let{word:d,string:n,match:l,matchStartIndex:u,captureGroups:c,internalCaptureGroups:h}=a.matchData(r,s,e,t);if(a.checkWhitelist(l,n,u,d))return l;i&&a.foundMatch(d);let p=d.sub||a.cfg.defaultSubstitution;return a.cfg.preserveCase&&(o.default.allUpperCase(l)?p=p.toUpperCase():o.default.capitalized(l)&&(p=o.default.capitalize(p))),a.cfg.substitutionMark&&(p="["+p+"]"),h&&(p=c[0]+p+c[2]),p}))});break;case s.default.FilterMethods.Remove:r.regExps.forEach((t,s)=>{e=e.replace(t,(function(e,...t){let{word:d,string:n,match:l,matchStartIndex:u,captureGroups:c,internalCaptureGroups:h}=a.matchData(r,s,e,t);return a.checkWhitelist(l.trim(),n,u,d)?l:(i&&a.foundMatch(d),h?o.default.whitespaceRegExp.test(c[0])&&o.default.whitespaceRegExp.test(c[2])?c[0]:o.default.nonWordRegExp.test(c[0])||o.default.nonWordRegExp.test(c[2])?(c[0]+c[2]).trim():"":o.default.whitespaceRegExp.test(l[0])&&o.default.whitespaceRegExp.test(l[l.length-1])?l[0]:"")}))})}return e}replaceTextResult(e,t=!1,i=!0){let s={original:e,filtered:this.replaceText(e,t,i),modified:!1};return s.modified=s.filtered!=e,s}}},function(e,t,i){"use strict";function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class o{constructor(){s(this,"xpathDocText",void 0),s(this,"xpathNodeText",void 0)}static isForbiddenNode(e){return!!e.isContentEditable||(!(!e.parentNode||!e.parentNode.isContentEditable&&!o.forbiddenTags.includes(e.parentNode.nodeName))||o.forbiddenTags.includes(e.nodeName))}}t.default=o,s(o,"disabledProtocols",new RegExp("(^chrome:|^about:|^[a-zA-Z]+-extension:)","i")),s(o,"forbiddenNodeRegExp",new RegExp("^s*(<[a-z].+?/?>|{.+?:.+?;.*}|https?://[^s]+$)")),s(o,"forbiddenTags",["SCRIPT","STYLE","INPUT","TEXTAREA","IFRAME","LINK"])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(i(0)),o=a(i(8));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d{constructor(e){r(this,"cueRuleIds",void 0),r(this,"enabledRuleIds",void 0),r(this,"filter",void 0),r(this,"lastFilteredNode",void 0),r(this,"lastFilteredText",void 0),r(this,"lastProcessed",void 0),r(this,"muted",void 0),r(this,"rules",void 0),r(this,"simpleUnmute",void 0),r(this,"sites",void 0),r(this,"supportedPage",void 0),r(this,"unmuteDelay",void 0),r(this,"volume",void 0),r(this,"watcherRuleIds",void 0),r(this,"wordlistId",void 0),r(this,"youTube",void 0),r(this,"youTubeAutoSubsMin",void 0),r(this,"youTubeAutoSubsMax",void 0),r(this,"youTubeAutoSubsTimeout",void 0),this.cueRuleIds=[],this.enabledRuleIds=[],this.watcherRuleIds=[],this.filter=e,this.lastFilteredNode=null,this.lastFilteredText="",this.lastProcessed=[],this.muted=!1,e.cfg.customAudioSites&&"object"==typeof e.cfg.customAudioSites||(e.cfg.customAudioSites={}),this.sites=o.default.combineSites(e.cfg.customAudioSites),this.unmuteDelay=0,this.volume=1,this.wordlistId=e.audioWordlistId,this.youTubeAutoSubsMin=e.cfg.youTubeAutoSubsMin,this.youTubeAutoSubsMax=1e3*e.cfg.youTubeAutoSubsMax,this.rules=this.sites[e.hostname],this.rules&&(Array.isArray(this.rules)||(this.rules=[this.rules]),this.initRules(),this.enabledRuleIds.length>0&&(this.supportedPage=!0,["tv.youtube.com","www.youtube.com"].includes(e.hostname)&&(this.youTube=!0),this.watcherRuleIds.length>0&&this.watcherRuleIds.forEach(e=>{setInterval(this.watcher,this.rules[e].checkInterval,this,e)}),this.cueRuleIds.length>0&&setInterval(this.watchForVideo,250,this)))}clean(e,t=0){let i=this.rules[t];if("watcher"===i.mode)return;let o=!1;e.nodeName&&"#text"===e.nodeName&&e.parentElement&&(e=e.parentElement);let a=i.subtitleSelector&&e.querySelectorAll?e.querySelectorAll(i.subtitleSelector):[e];if(0!==a.length)switch(a.forEach(e=>{let t="#text"===e.nodeName?"textContent":"innerText";!0===i.convertBreaks&&"#text"!==e.nodeName&&!d.brTagRegExp.test(e[t])&&d.brTagRegExp.test(e.innerHTML)&&("pre"!==e.style.whiteSpace&&(e.style.whiteSpace="pre"),e.textContent=e.innerHTML.replace(d.brTagRegExp,"\n"));let s=this.replaceTextResult(e[t]);s.modified&&(o=!0,this.mute(i.muteMethod),i.filterSubtitles&&(i.ignoreMutations&&this.filter.stopObserving(),e[t]=s.filtered,i.ignoreMutations&&this.filter.startObserving()),this.lastFilteredNode=e,this.lastFilteredText=e[t])}),i.showSubtitles){case s.default.ShowSubtitles.Filtered:o?this.showSubtitles(i):this.hideSubtitles(i,a);break;case s.default.ShowSubtitles.Unfiltered:o?this.hideSubtitles(i,a):this.showSubtitles(i);break;case s.default.ShowSubtitles.None:this.hideSubtitles(i,a)}}cleanYouTubeAutoSubs(e){null!=this.youTubeAutoSubsTimeout&&(clearTimeout(this.youTubeAutoSubsTimeout),this.youTubeAutoSubsTimeout=null);let t=this.replaceTextResult(e.textContent);if(t.modified)e.textContent=t.filtered,this.mute(),this.unmuteDelay=null,this.filter.updateCounterBadge(),this.youTubeAutoSubsMax&&(this.youTubeAutoSubsTimeout=window.setTimeout(this.youTubeAutoSubsMuteTimeout,this.youTubeAutoSubsMax,this));else if(this.muted)if(this.youTubeAutoSubsMin>0){let e=document.getElementsByTagName("video")[0].currentTime;null==this.unmuteDelay?this.unmuteDelay=e:(e<this.unmuteDelay&&(this.unmuteDelay=0),e>this.unmuteDelay+this.youTubeAutoSubsMin&&this.unmute())}else this.unmute();if(this.filter.cfg.showSubtitles!==s.default.ShowSubtitles.All){let e=document.querySelector("div.ytp-caption-window-rollup span.captions-text");"block"==e.style.display&&(e.style.display="none")}}getVideoTextTrack(e,t,i=!0){if(e.textTracks&&e.textTracks.length>0)for(let s=0;s<e.textTracks.length;s++)if(t){if(t==e.textTracks[s].language&&(!i||i&&"showing"===e.textTracks[s].mode))return e.textTracks[s]}else if(!i||i&&"showing"===e.textTracks[s].mode)return e.textTracks[s]}hideSubtitles(e,t){if(e.displaySelector){let t=document.querySelector(e.displaySelector);t&&(""===e.displayShow&&""!==t.style.display&&t.style.display!==e.displayHide&&(e.displayShow=t.style.display),t.style.display=e.displayHide)}else t.forEach(t=>{t.innerText="",e.removeSubtitleSpacing&&t.style&&(t.style.padding&&(t.style.padding=0),t.style.margin&&(t.style.margin=0))})}initCueRule(e){void 0===e.videoSelector&&(e.videoSelector="video"),void 0===e.videoCueRequireShowing&&(e.videoCueRequireShowing=this.filter.cfg.muteCueRequireShowing)}initElementChildRule(e){e.parentSelector||e.parentSelectorAll||(e.disabled=!0),void 0!==e.displaySelector&&(void 0===e.displayHide&&(e.displayHide="none"),void 0===e.displayShow&&(e.displayShow=""))}initElementRule(e){void 0!==e.displaySelector&&(void 0===e.displayHide&&(e.displayHide="none"),void 0===e.displayShow&&(e.displayShow=""))}initRules(){this.rules.forEach((e,t)=>{if((void 0===e.mode||("element"==e.mode||"elementChild"==e.mode)&&!e.tagName||!0===e.iframe&&null==this.filter.iframe||!1===e.iframe&&null!=this.filter.iframe)&&(e.disabled=!0),!e.disabled){switch(null==e.filterSubtitles&&(e.filterSubtitles=!0),null!=e.simpleUnmute&&(this.simpleUnmute=!0),null==e.muteMethod&&(e.muteMethod=this.filter.cfg.muteMethod),null==e.showSubtitles&&(e.showSubtitles=this.filter.cfg.showSubtitles),null!=e.tagName&&"#text"!=e.tagName&&(e.tagName=e.tagName.toUpperCase()),e.mode){case"cue":this.initCueRule(e),e.disabled||this.cueRuleIds.push(t);break;case"elementChild":this.initElementChildRule(e);break;case"element":this.initElementRule(e);break;case"text":this.initTextRule(e);break;case"watcher":this.initWatcherRule(e),e.disabled||this.watcherRuleIds.push(t)}e.disabled||this.enabledRuleIds.push(t)}})}initTextRule(e){e.tagName="#text"}initWatcherRule(e){void 0===e.checkInterval&&(e.checkInterval=20),void 0===e.trackProcessed&&(e.trackProcessed=!0),void 0===e.videoSelector&&(e.videoSelector="video")}mute(e=this.filter.cfg.muteMethod,t){if(!this.muted)switch(this.muted=!0,e){case s.default.MuteMethods.Tab:chrome.runtime.sendMessage({mute:!0});break;case s.default.MuteMethods.Video:t||(t=document.querySelector("video")),t&&null!=t.volume&&(this.volume=t.volume,t.volume=0)}}playing(e){return!!(e&&e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2)}processCues(e,t){for(let i=0;i<e.length;i++){let s=e[i];if(s.hasOwnProperty("filtered"))continue;t.videoCueSync&&(s.startTime+=t.videoCueSync,s.endTime+=t.videoCueSync);let o=this.replaceTextResult(s.text);o.modified?(s.filtered=!0,s.originalText=s.text,s.text=o.filtered):s.filtered=!1}}replaceTextResult(e,t=!0){return this.filter.replaceTextResult(e,this.wordlistId,t)}showSubtitles(e){if(e.displaySelector){let t=document.querySelector(e.displaySelector);t&&(t.style.display=e.displayShow)}}supportedNode(e){for(let t=0;t<this.enabledRuleIds.length;t++){let i=this.enabledRuleIds[t],s=this.rules[i];switch(s.mode){case"element":if(e.nodeName==s.tagName){let t=!1;if(t||!s.className||e.className&&e.classList.contains(s.className)||(t=!0),t||!s.dataPropPresent||e.dataset&&e.dataset.hasOwnProperty(s.dataPropPresent)||(t=!0),t||!s.hasChildrenElements||"number"==typeof e.childElementCount&&0!=e.childElementCount||(t=!0),t||!s.subtitleSelector||"function"==typeof e.querySelector&&e.querySelector(s.subtitleSelector)||(t=!0),t||!s.containsSelector||"function"==typeof e.querySelector&&e.querySelector(s.containsSelector)||(t=!0),!t)return i}break;case"elementChild":if(e.nodeName===s.tagName)if(s.parentSelector){let t=document.querySelector(s.parentSelector);if(t&&t.contains(e))return i}else{let t=document.querySelectorAll(s.parentSelectorAll);for(let s=0;s<t.length;s++)if(t[s].contains(e))return i}break;case"text":if(e.nodeName===s.tagName){let t=document.querySelector(s.parentSelector);if(t&&t.contains(e))return i}break;case"watcher":if(e.parentElement&&e.parentElement==document.querySelector(s.subtitleSelector))return i;if(null!=s.parentSelector){let t=document.querySelector(s.parentSelector);if(t&&t.contains(e))return i}}}return!1}unmute(e=this.filter.cfg.muteMethod,t){if(this.muted)switch(this.muted=!1,e){case s.default.MuteMethods.Tab:chrome.runtime.sendMessage({mute:!1});break;case s.default.MuteMethods.Video:t||(t=document.querySelector("video")),t&&null!=t.volume&&(t.volume=this.volume)}}watcher(e,t=0){let i=e.rules[t],o=document.querySelector(i.videoSelector);if(o&&e.playing(o)){let t=document.querySelector(i.subtitleSelector);if(t&&t.textContent){let o=!1,a=!i.trackProcessed;if(t.hasChildNodes()){if(t.childNodes.forEach((s,r)=>{let d="#text"===(s&&s.nodeName)?"textContent":"innerText";if(!a)if(t.childNodes.length===e.lastProcessed.length){if(e.lastProcessed[r]===s[d])return!1;a=!0,e.lastProcessed.slice(0,r)}else a=!0,e.lastProcessed=[];if(s[d]){let t=e.replaceTextResult(s[d]);t.modified&&(e.mute(i.muteMethod),o=!0,i.filterSubtitles&&(s[d]=t.filtered),e.lastFilteredNode=s,e.lastFilteredText=s[d])}i.trackProcessed&&e.lastProcessed.push(s[d])}),!a)return!1}else{let s="#text"===(t&&t.nodeName)?"textContent":"innerText";if(!a&&e.lastProcessed.includes(t[s]))return!1;if(t[s]&&e.lastFilteredText&&!t[s].contains(e.lastFilteredText)){let a=e.replaceTextResult(t[s]);a.modified&&(e.mute(i.muteMethod),o=!0,i.filterSubtitles&&(t[s]=a.filtered),e.lastFilteredNode=t,e.lastFilteredText=t[s])}i.trackProcessed&&(e.lastProcessed=[t[s]])}let r="#text"===(t&&t.nodeName)?"textContent":"innerText";if(o||t[r].includes(e.lastFilteredText)||e.unmute(i.muteMethod),"#text"!==t.nodeName)switch(i.showSubtitles){case s.default.ShowSubtitles.Filtered:t.style.display=o?"":"none";break;case s.default.ShowSubtitles.Unfiltered:t.style.display=o?"none":"";break;case s.default.ShowSubtitles.None:t.style.display="none"}o&&e.filter.updateCounterBadge()}}}watchForVideo(e){e.cueRuleIds.forEach(t=>{let i=e.rules[t],o=document.querySelector(i.videoSelector);if(o&&o.textTracks&&e.playing(o)){let t=e.getVideoTextTrack(o,i.videoCueLanguage,i.videoCueRequireShowing);t&&!t.oncuechange&&(i.videoCueHideCues||i.showSubtitles!==s.default.ShowSubtitles.None||(t.mode="hidden"),t.oncuechange=()=>{if(t.activeCues&&t.activeCues.length>0){let a=!1;for(let s=0;s<t.activeCues.length;s++){let r=t.activeCues[s];if(!r.hasOwnProperty("filtered")){let s=t.cues;e.processCues(s,i)}r.filtered&&(a=!0,e.mute(i.muteMethod,o))}if(a||e.unmute(i.muteMethod,o),i.videoCueHideCues){if(i.showSubtitles===s.default.ShowSubtitles.Filtered&&!a||i.showSubtitles===s.default.ShowSubtitles.Unfiltered&&a||i.showSubtitles===s.default.ShowSubtitles.None)for(let e=0;e<t.activeCues.length;e++){let i=t.activeCues[e];i.text="",i.position=100,i.size=0}}else if(a)switch(i.showSubtitles){case s.default.ShowSubtitles.Filtered:t.mode="showing";break;case s.default.ShowSubtitles.Unfiltered:t.mode="hidden"}else switch(i.showSubtitles){case s.default.ShowSubtitles.Filtered:t.mode="hidden";break;case s.default.ShowSubtitles.Unfiltered:t.mode="showing"}}else e.unmute(i.muteMethod,o)})}})}youTubeAutoSubsCurrentRow(e){return!(e.parentElement.parentElement!=e.parentElement.parentElement.parentElement.lastChild)}youTubeAutoSubsMuteTimeout(e){let t=window.document.querySelector("video");t&&e.playing(t)&&e.unmute(),e.youTubeAutoSubsTimeout=null}youTubeAutoSubsNodeIsSubtitleText(e){let t=document.querySelector("div.caption-window");return!(!t||!t.contains(e))}youTubeAutoSubsPresent(){return!!document.querySelector("div.ytp-caption-window-rollup")}youTubeAutoSubsSupportedNode(e){return"#text"==e.nodeName&&""!=e.textContent&&!!this.youTubeAutoSubsNodeIsSubtitleText(e)}}t.default=d,r(d,"brTagRegExp",new RegExp("<br>","i"))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,o=(s=i(0))&&s.__esModule?s:{default:s};class a{static combineSites(e={}){return Object.assign({},a.sites,e)}}t.default=a,function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(a,"sites",{"abc.com":[{mode:"element",className:"akamai-caption-text",tagName:"DIV"}],"www.amazon.com":[{mode:"watcher",iframe:!1,parentSelector:"div.webPlayerContainer div p > span",showSubtitles:o.default.ShowSubtitles.All,simpleUnmute:!0,subtitleSelector:"div.webPlayerContainer div span > span",videoSelector:"div.webPlayerElement video[src]"}],"www.amc.com":[{mode:"element",className:"ttr-container",subtitleSelector:"span.ttr-cue",tagName:"DIV"},{mode:"cue",videoCueLanguage:"en",videoSelector:"video"}],"www.att.tv":[{mode:"cue",videoSelector:"video#quickplayPlayer"}],"www.attwatchtv.com":[{mode:"cue",videoSelector:"video#quickplayPlayer"}],"gem.cbc.ca":[{className:"jw-text-track-container",mode:"element",subtitleSelector:"div.jw-text-track-cue",tagName:"DIV"}],"www.cbs.com":[{mode:"cue",videoCueLanguage:"en",videoCueRequireShowing:!1}],"www.crackle.com":[{mode:"elementChild",ignoreMutations:!0,parentSelector:"div.clpp-subtitles-container",simpleUnmute:!0,tagName:"#text"}],"www.dishanywhere.com":[{mode:"element",className:"bmpui-ui-subtitle-label",tagName:"SPAN"},{mode:"element",className:"bmpui-subtitle-region-container",subtitleSelector:"div.bmpui-container-wrapper > span.bmpui-ui-subtitle-label",tagName:"div"}],"www.disneyplus.com":[{mode:"cue",videoSelector:"video.btm-media-client-element"}],"www.fox.com":[{mode:"element",className:"jw-text-track-container",subtitleSelector:"div.jw-text-track-cue",tagName:"DIV"}],"www.funimation.com":[{mode:"elementChild",iframe:!0,parentSelector:"div.vjs-text-track-display",simpleUnmute:!0,subtitleSelector:":scope div > div",tagName:"DIV"}],"play.google.com":[{className:"lava-timed-text-window",mode:"element",subtitleSelector:"span.lava-timed-text-caption",tagName:"DIV"}],"play.hbomax.com":[{mode:"elementChild",parentSelectorAll:"div.class3 > span, div.class28 > span",showSubtitles:0,tagName:"SPAN"}],"www.hulu.com":[{mode:"element",className:"caption-text-box",displaySelector:"div.caption-text-box",subtitleSelector:"p",tagName:"DIV"}],"www.nbc.com":[{mode:"element",className:"ttr-line",subtitleSelector:"span.ttr-cue",tagName:"DIV"},{mode:"cue",videoCueLanguage:"en"}],"www.netflix.com":[{mode:"element",className:"player-timedtext-text-container",subtitleSelector:"span",tagName:"DIV"}],"www.philo.com":[{mode:"cue"}],"app.plex.tv":[{mode:"element",dataPropPresent:"dialogueId",subtitleSelector:"span > span",tagName:"DIV"},{mode:"element",containsSelector:"div[data-dialogue-id]",subtitleSelector:"span > span",tagName:"DIV"}],"watch.redeemtv.com":[{mode:"elementChild",convertBreaks:!0,displaySelector:"div.vp-captions",parentSelector:"div.vp-captions",tagName:"SPAN"}],"play.stan.com.au":[{mode:"elementChild",ignoreMutations:!0,parentSelector:"div.clpp-subtitles-container",simpleUnmute:!0,tagName:"#text"}],"www.starz.com":[{mode:"elementChild",parentSelector:"starz-captions > div.cue-list",tagName:"SPAN"}],"www.syfy.com":[{mode:"element",className:"ttr-line",subtitleSelector:"span.ttr-cue",tagName:"DIV"}],"www.tntdrama.com":[{mode:"cue",videoCueLanguage:"en",videoSelector:"video.top-media-element"}],"www.universalkids.com":[{mode:"element",subtitleSelector:"div.gwt-HTML",tagName:"DIV"}],"www.usanetwork.com":[{mode:"element",className:"ttr-line",subtitleSelector:"span.ttr-cue",tagName:"DIV"}],"www.vudu.com":[{mode:"element",subtitleSelector:"span.subtitles",tagName:"DIV"}],"tv.youtube.com":[{mode:"element",className:"caption-window",subtitleSelector:"span.ytp-caption-segment",tagName:"DIV"}],"www.youtube.com":[{mode:"element",className:"caption-window",subtitleSelector:"span.ytp-caption-segment",tagName:"DIV"}]})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(i(0)),o=a(i(10));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends o.default{static async build(e=[]){"string"==typeof e&&(e=[e]);let t=await d.getConfig(e);return new d(t)}constructor(e){if(void 0===e)throw new Error("Cannot be called directly. call build()");super(),r(this,"_splitContainerKeys",void 0),r(this,"audioWordlistId",void 0),r(this,"customAudioSites",void 0),r(this,"domains",void 0),r(this,"enabledDomainsOnly",void 0),r(this,"muteAudio",void 0),r(this,"muteAudioOnly",void 0),r(this,"muteCueRequireShowing",void 0),r(this,"muteMethod",void 0),r(this,"password",void 0),r(this,"showSubtitles",void 0),r(this,"showUpdateNotification",void 0),r(this,"youTubeAutoSubsMax",void 0),r(this,"youTubeAutoSubsMin",void 0),this._splitContainerKeys={},Object.assign(this,d._classDefaults,e)}static combineData(e,t){if(e[t]={},void 0!==e[`_${t}0`]){let i=d.getDataContainerKeys(e,t);return i.forEach((function(i){Object.assign(e[t],e[i]),delete e[i]})),i}}static getConfig(e){return new Promise((function(t,i){let s=null;e.length>0&&!e.some(e=>d._splittingKeys.includes(e))&&(s={},e.forEach(e=>{s[e]=d._defaults[e]})),chrome.storage.sync.get(s,(function(i){i._splitContainerKeys={},Object.keys(d._defaults).forEach((function(t){null!=s&&!e.includes(t)||void 0!==i[t]||(i[t]=d._defaults[t])})),(0===e.length||e.includes("words"))&&(void 0!==i._words0&&0!=Object.keys(i._words0).length||(i._words0=o.default._defaultWords)),d._splittingKeys.forEach((function(e){let t=d.combineData(i,e);t&&(i._splitContainerKeys[e]=t)})),null!==s&&e.length>0&&Object.keys(i).forEach((function(t){e.includes(t)||delete i[t]})),t(i)}))}))}static getDataContainerKeys(e,t){let i=new RegExp(`^_${t}\\d+`);return Object.keys(e).filter((function(e){return i.test(e)}))}ordered(){let e=this;return Object.keys(e).sort().reduce((t,i)=>("_"!=i[0]&&(t[i]=e[i]),t),{})}remove(e){let t=this;"string"==typeof e&&(e=[e]),chrome.storage.sync.remove(e),e.forEach((function(e){delete t[e]}))}reset(){return new Promise((function(e,t){chrome.storage.sync.clear((function(){e(chrome.runtime.lastError?1:0)}))}))}save(e=[]){let t=this;"string"==typeof e&&(e=[e]);let i={};return 0===e.length&&(e=Object.keys(d._defaults)).push("words"),e.forEach((function(e){d._splittingKeys.includes(e)?Object.assign(i,t.splitData(e)):i[e]=t[e]})),0!==Object.keys(t._splitContainerKeys).length&&e.some(e=>d._splittingKeys.includes(e))&&d._splittingKeys.forEach((function(s){if(e.includes(s)){let e=d.getDataContainerKeys(i,s);if(t._splitContainerKeys[s]){let i=t._splitContainerKeys[s].filter(t=>!e.includes(t));0!==i.length&&(t.remove(i),t._splitContainerKeys[s]=e)}}})),new Promise((function(e,t){chrome.storage.sync.set(i,(function(){e(chrome.runtime.lastError?1:0)}))}))}splitData(e){let t=this;const i=new TextEncoder;let s=0,o=2,a={},r=`_${e}${s}`;return a[r]={},o+=i.encode(`{"${r}":{}}`).length,Object.keys(t[e]).sort().forEach((function(n){let l=i.encode(`",${n}":`).length;l+=i.encode(JSON.stringify(t[e][n])).length,o+l>=d._maxBytes&&(s++,r=`_${e}${s}`,a[r]={},o=i.encode(`"${r}":{}`).length),o+=l,a[r][n]=t[e][n]})),a}}t.default=d,r(d,"_classDefaults",{domains:{},audioWordlistId:0,customAudioSites:null,enabledDomainsOnly:!1,muteAudio:!1,muteAudioOnly:!1,muteCueRequireShowing:!0,muteMethod:s.default.MuteMethods.Tab,password:null,showSubtitles:s.default.ShowSubtitles.All,showUpdateNotification:!0,youTubeAutoSubsMax:0,youTubeAutoSubsMin:0}),r(d,"QUOTA_BYTES_PER_ITEM",8192),r(d,"_defaults",Object.assign({},o.default._defaults,d._classDefaults)),r(d,"_splittingKeys",["domains","words"]),r(d,"_maxBytes",8e3)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,o=(s=i(0))&&s.__esModule?s:{default:s};function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class r{constructor(e={}){a(this,"censorCharacter",void 0),a(this,"censorFixedLength",void 0),a(this,"defaultSubstitution",void 0),a(this,"defaultWordMatchMethod",void 0),a(this,"defaultWordRepeat",void 0),a(this,"defaultWordSeparators",void 0),a(this,"filterMethod",void 0),a(this,"filterWordList",void 0),a(this,"iWordWhitelist",void 0),a(this,"preserveCase",void 0),a(this,"preserveFirst",void 0),a(this,"preserveLast",void 0),a(this,"showCounter",void 0),a(this,"showSummary",void 0),a(this,"substitutionMark",void 0),a(this,"wordlistId",void 0),a(this,"wordlists",void 0),a(this,"wordlistsEnabled",void 0),a(this,"words",void 0),a(this,"wordWhitelist",void 0),Object.assign(this,r._defaults,e)}addWord(e,t){if(e=e.trim().toLowerCase(),Object.keys(this.words).includes(e))return!1;if(t)return t.sub=t.sub.trim().toLowerCase(),this.words[e]=t,!0;{let t=[];return this.wordlistsEnabled&&t.push(this.wordlistId),this.words[e]={matchMethod:this.defaultWordMatchMethod,repeat:this.defaultWordRepeat,separators:this.defaultWordSeparators,lists:t,sub:""},!0}}removeWord(e){return e=e.trim().toLowerCase(),!!Object.keys(this.words).includes(e)&&(delete this.words[e],!0)}repeatForWord(e){return!0===this.words[e].repeat||!1===this.words[e].repeat?this.words[e].repeat:this.defaultWordRepeat}sanitizeWords(){let e={};Object.keys(this.words).sort().forEach(t=>{e[t.trim().toLowerCase()]=this.words[t]}),this.words=e}}t.default=r,a(r,"_allWordlists",["All words"]),a(r,"_defaults",{censorCharacter:"*",censorFixedLength:0,defaultSubstitution:"censored",defaultWordMatchMethod:o.default.MatchMethods.Exact,defaultWordRepeat:!1,defaultWordSeparators:!1,filterMethod:o.default.FilterMethods.Substitute,filterWordList:!0,iWordWhitelist:[],preserveCase:!0,preserveFirst:!0,preserveLast:!1,showCounter:!0,showSummary:!0,substitutionMark:!1,wordlistId:0,wordlists:["Wordlist 1","Wordlist 2","Wordlist 3","Wordlist 4","Wordlist 5","Wordlist 6"],wordlistsEnabled:!0,wordWhitelist:[]}),a(r,"_defaultWords",{ass:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!0,separators:!1,sub:"butt"},asses:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!1,separators:!1,sub:"butts"},asshole:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"jerk"},badass:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!0,sub:"cool"},bastard:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"idiot"},bitch:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"bench"},cocksucker:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!0,sub:"suckup"},cunt:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"expletive"},dammit:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!1,separators:!0,sub:"dangit"},damn:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!1,separators:!1,sub:"dang"},dumbass:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"idiot"},fag:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!0,separators:!1,sub:"gay"},faggot:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"gay"},fags:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!0,separators:!1,sub:"gays"},fuck:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!0,sub:"freak"},goddammit:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!0,sub:"dangit"},hell:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!1,separators:!1,sub:"heck"},jackass:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!0,sub:"jerk"},nigga:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!0,separators:!1,sub:"bruh"},nigger:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!0,separators:!1,sub:"man"},niggers:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!0,separators:!1,sub:"people"},piss:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"pee"},pissed:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"ticked"},pussies:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!0,separators:!1,sub:"softies"},pussy:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!0,separators:!1,sub:"softie"},shit:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"crap"},slut:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"tramp"},tits:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"chest"},twat:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!0,separators:!1,sub:"dumbo"},twats:{lists:[],matchMethod:o.default.MatchMethods.Exact,repeat:!0,separators:!1,sub:"dumbos"},whore:{lists:[],matchMethod:o.default.MatchMethods.Partial,repeat:!0,separators:!1,sub:"tramp"}})},function(e,t){"undefined"!=typeof window&&(window.findAndReplaceDOMText=function(){var e="retain",t=document,i={}.hasOwnProperty;function s(){return o.apply(null,arguments)||a.apply(null,arguments)}function o(e,t,i,o,r){if(t&&!t.nodeType&&arguments.length<=2)return!1;var d,n="function"==typeof i;n&&(d=i,i=function(e,t){return d(e.text,t.startIndex)});var l=a(t,{find:e,wrap:n?null:i,replace:n?i:"$"+(o||"&"),prepMatch:function(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(o>0){var i=e[o];e.index+=e[0].indexOf(i),e[0]=i}return e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=t,e},filterElements:r});return s.revert=function(){return l.revert()},!0}function a(e,t){return new r(e,t)}function r(t,o){var a=o.preset&&s.PRESETS[o.preset];if(o.portionMode=o.portionMode||e,a)for(var r in a)i.call(a,r)&&!i.call(o,r)&&(o[r]=a[r]);this.node=t,this.options=o,this.prepMatch=o.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}return s.NON_PROSE_ELEMENTS={br:1,hr:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1},s.NON_CONTIGUOUS_PROSE_ELEMENTS={address:1,article:1,aside:1,blockquote:1,dd:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,nav:1,noscript:1,ol:1,output:1,p:1,pre:1,section:1,ul:1,br:1,li:1,summary:1,dt:1,details:1,rp:1,rt:1,rtc:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1,table:1,tbody:1,thead:1,th:1,tr:1,td:1,caption:1,col:1,tfoot:1,colgroup:1},s.NON_INLINE_PROSE=function(e){return i.call(s.NON_CONTIGUOUS_PROSE_ELEMENTS,e.nodeName.toLowerCase())},s.PRESETS={prose:{forceContext:s.NON_INLINE_PROSE,filterElements:function(e){return!i.call(s.NON_PROSE_ELEMENTS,e.nodeName.toLowerCase())}}},s.Finder=r,r.prototype={search:function(){var e,t=0,i=0,s=this.options.find,o=this.getAggregateText(),a=[],r=this;return s="string"==typeof s?RegExp(String(s).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1"),"g"):s,function o(d){for(var n=0,l=d.length;n<l;++n){var u=d[n];if("string"==typeof u){if(s.global)for(;e=s.exec(u);)a.push(r.prepMatch(e,t++,i));else(e=u.match(s))&&a.push(r.prepMatch(e,0,i));i+=u.length}else o(u)}}(o),a},prepMatch:function(e,t,i){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return e.endIndex=i+e.index+e[0].length,e.startIndex=i+e.index,e.index=t,e},getAggregateText:function(){var e=this.options.filterElements,t=this.options.forceContext;return function i(s){if(s.nodeType===Node.TEXT_NODE)return[s.data];if(e&&!e(s))return[];var o=[""],a=0;if(s=s.firstChild)do{if(s.nodeType!==Node.TEXT_NODE){var r=i(s);t&&s.nodeType===Node.ELEMENT_NODE&&(!0===t||t(s))?(o[++a]=r,o[++a]=""):("string"==typeof r[0]&&(o[a]+=r.shift()),r.length&&(o[++a]=r,o[++a]=""))}else o[a]+=s.data}while(s=s.nextSibling);return o}(this.node)},processMatches:function(){var e,t,i,s=this.matches,o=this.node,a=this.options.filterElements,r=[],d=o,n=s.shift(),l=0,u=0,c=[o];e:for(;;){if(d.nodeType===Node.TEXT_NODE&&(!t&&d.length+l>=n.endIndex?t={node:d,index:u++,text:d.data.substring(n.startIndex-l,n.endIndex-l),indexInMatch:0===l?0:l-n.startIndex,indexInNode:n.startIndex-l,endIndexInNode:n.endIndex-l,isEnd:!0}:e&&r.push({node:d,index:u++,text:d.data,indexInMatch:l-n.startIndex,indexInNode:0}),!e&&d.length+l>n.startIndex&&(e={node:d,index:u++,indexInMatch:0,indexInNode:n.startIndex-l,endIndexInNode:n.endIndex-l,text:d.data.substring(n.startIndex-l,n.endIndex-l)}),l+=d.data.length),i=d.nodeType===Node.ELEMENT_NODE&&a&&!a(d),e&&t){if(d=this.replaceMatch(n,e,r,t),l-=t.node.data.length-t.endIndexInNode,e=null,t=null,r=[],u=0,!(n=s.shift()))break}else if(!i&&(d.firstChild||d.nextSibling)){d.firstChild?(c.push(d),d=d.firstChild):d=d.nextSibling;continue}for(;;){if(d.nextSibling){d=d.nextSibling;break}if((d=c.pop())===o)break e}}},revert:function(){for(var e=this.reverts.length;e--;)this.reverts[e]();this.reverts=[]},prepareReplacementString:function(e,t,i){var s=this.options.portionMode;return"first"===s&&t.indexInMatch>0?"":(e=e.replace(/\$(\d+|&|`|')/g,(function(e,t){var s;switch(t){case"&":s=i[0];break;case"`":s=i.input.substring(0,i.startIndex);break;case"'":s=i.input.substring(i.endIndex);break;default:s=i[+t]||""}return s})),"first"===s?e:t.isEnd?e.substring(t.indexInMatch):e.substring(t.indexInMatch,t.indexInMatch+t.text.length))},getPortionReplacementNode:function(e,i){var s=this.options.replace||"$&";if("function"==typeof s)return(s=s(e,i))&&s.nodeType?s:t.createTextNode(String(s))},replaceMatch:function(e,i,s,o){var a,r,d=i.node,n=o.node;if(d===n){var l=d;i.indexInNode>0&&(a=t.createTextNode(l.data.substring(0,i.indexInNode)),l.parentNode.insertBefore(a,l));var u=this.getPortionReplacementNode(o,e);return l.parentNode.insertBefore(u,l),o.endIndexInNode<l.length&&(r=t.createTextNode(l.data.substring(o.endIndexInNode)),l.parentNode.insertBefore(r,l)),l.parentNode.removeChild(l),this.reverts.push((function(){a===u.previousSibling&&a.parentNode.removeChild(a),r===u.nextSibling&&r.parentNode.removeChild(r),u.parentNode.replaceChild(l,u)})),u}a=t.createTextNode(d.data.substring(0,i.indexInNode)),r=t.createTextNode(n.data.substring(o.endIndexInNode));for(var c=this.getPortionReplacementNode(i,e),h=[],p=0,f=s.length;p<f;++p){var m=s[p],b=this.getPortionReplacementNode(m,e);m.node.parentNode.replaceChild(b,m.node),this.reverts.push(function(e,t){return function(){t.parentNode.replaceChild(e.node,t)}}(m,b)),h.push(b)}var g=this.getPortionReplacementNode(o,e);return d.parentNode.insertBefore(a,d),d.parentNode.insertBefore(c,d),d.parentNode.removeChild(d),n.parentNode.insertBefore(g,n),n.parentNode.insertBefore(r,n),n.parentNode.removeChild(n),this.reverts.push((function(){a.parentNode.removeChild(a),c.parentNode.replaceChild(d,c),r.parentNode.removeChild(r),g.parentNode.replaceChild(n,g)})),g}},s}())}]);